<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 28 Basic introduction to tidyverse | Community Contributions STAT GR 5293</title>
<meta name="description" content="Xiaoyuan Ge and Hui Li library(ggplot2) library(dplyr)  28.1 Motivation In data science, good visualizations should give and provide more information than you can just see in the data itself. Good...">
<meta name="generator" content="bookdown 0.25 with bs4_book()">
<meta property="og:title" content="Chapter 28 Basic introduction to tidyverse | Community Contributions STAT GR 5293">
<meta property="og:type" content="book">
<meta property="og:description" content="Xiaoyuan Ge and Hui Li library(ggplot2) library(dplyr)  28.1 Motivation In data science, good visualizations should give and provide more information than you can just see in the data itself. Good...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 28 Basic introduction to tidyverse | Community Contributions STAT GR 5293">
<meta name="twitter:description" content="Xiaoyuan Ge and Hui Li library(ggplot2) library(dplyr)  28.1 Motivation In data science, good visualizations should give and provide more information than you can just see in the data itself. Good...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><link href="libs/parallel-coordinates-2.1.8/parcoords.css" rel="stylesheet">
<script src="libs/parcoords-binding-1.0.0/parcoords.js"></script><script src="libs/d3-5.16.0/d3.min.js"></script><link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet">
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script><script src="libs/dygraphs-1.1.1/shapes.js"></script><script src="libs/moment-2.8.4/moment.js"></script><script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script><script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script><script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script><script src="libs/echarts-4.0.0/echarts.min.js"></script><script src="libs/echarts-4.0.0/echarts-wordcloud.min.js"></script><script src="libs/echarts_shapeFile-3.2.2/china.js"></script><script src="libs/echarts_shapeFile-3.2.2/provinceShape.js"></script><script src="libs/echarts_shapeFile-3.2.2/world.js"></script><script src="libs/echarts-binding-0.0.4/echarts.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Community Contributions STAT GR 5293</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Welcome!</a></li>
<li><a class="" href="community-contribution.html"><span class="header-section-number">2</span> Community Contribution</a></li>
<li><a class="" href="github-submission-instructions.html"><span class="header-section-number">3</span> GitHub submission instructions</a></li>
<li><a class="" href="sample-project.html"><span class="header-section-number">4</span> Sample project</a></li>
<li class="book-part">Cheatsheets</li>
<li><a class="" href="tmap-package.html"><span class="header-section-number">5</span> tmap package</a></li>
<li><a class="" href="graphics-cheatsheet-in-ggplot2.html"><span class="header-section-number">6</span> Graphics cheatsheet in ggplot2</a></li>
<li><a class="" href="ggplot2-cheatsheet.html"><span class="header-section-number">7</span> ggplot2 cheatsheet</a></li>
<li><a class="" href="data-preprocessing-cheat-sheet-in-r.html"><span class="header-section-number">8</span> Data preprocessing cheat sheet in R</a></li>
<li><a class="" href="data-wrangling-and-visualization-in-r.html"><span class="header-section-number">9</span> Data Wrangling and Visualization in R</a></li>
<li><a class="" href="ggplot2-cheatsheet-1.html"><span class="header-section-number">10</span> GGplot2 cheatsheet</a></li>
<li><a class="" href="cheat-sheet-for-tidyverse.html"><span class="header-section-number">11</span> Cheat Sheet for Tidyverse</a></li>
<li><a class="" href="memos-checklist-and-usful-links-experience-of-statistical-graphic.html"><span class="header-section-number">12</span> Memos, checklist and usful links: experience of statistical graphic</a></li>
<li><a class="" href="cheatsheet-for-multiple-graphics.html"><span class="header-section-number">13</span> Cheatsheet for multiple graphics</a></li>
<li><a class="" href="useful-setting-of-ggplot2.html"><span class="header-section-number">14</span> Useful setting of ggplot2</a></li>
<li class="book-part">Tutorials</li>
<li><a class="" href="visualizing-geographical-time-series-data-with-messy-country-name.html"><span class="header-section-number">15</span> Visualizing Geographical Time Series Data With Messy Country Name</a></li>
<li><a class="" href="plotly-package.html"><span class="header-section-number">16</span> Plotly package</a></li>
<li><a class="" href="web-scraping-using-beautifulsoup-in-python.html"><span class="header-section-number">17</span> Web Scraping Using BeautifulSoup in Python</a></li>
<li><a class="" href="a-brief-guide-through-ggplot-via-examples.html"><span class="header-section-number">18</span> A Brief Guide Through ggplot via Examples</a></li>
<li><a class="" href="drawing-five-common-plots-by-ggplot2.html"><span class="header-section-number">19</span> Drawing Five Common Plots by ggplot2</a></li>
<li><a class="" href="compare-different-ways-of-plotting-biplot-mosaicplot-and-heatmap.html"><span class="header-section-number">20</span> Compare different ways of plotting Biplot, Mosaicplot, and Heatmap</a></li>
<li><a class="" href="twitter-api-guide-in-r.html"><span class="header-section-number">21</span> Twitter API guide in R</a></li>
<li><a class="" href="geographical-maps-packages-comparison-ggmap-vs.-ggplot-vs-tmap.html"><span class="header-section-number">22</span> Geographical Maps Packages Comparison: ggmap vs. ggplot vs tmap</a></li>
<li><a class="" href="r-shiny-map-tutorial.html"><span class="header-section-number">23</span> R Shiny Map Tutorial</a></li>
<li><a class="" href="animation-graphs-in-plot_ly-and-gganimate.html"><span class="header-section-number">24</span> Animation graphs in plot_ly and gganimate</a></li>
<li><a class="" href="forest-plots.html"><span class="header-section-number">25</span> Forest Plots</a></li>
<li><a class="" href="differences-between-some-packages-of-visualizaiton.html"><span class="header-section-number">26</span> Differences between some packages of visualizaiton</a></li>
<li><a class="" href="lecture-helper.html"><span class="header-section-number">27</span> Lecture Helper</a></li>
<li><a class="active" href="basic-introduction-to-tidyverse.html"><span class="header-section-number">28</span> Basic introduction to tidyverse</a></li>
<li><a class="" href="class_material_code_throughout_this_semester.html"><span class="header-section-number">29</span> class_material_code_throughout_this_semester</a></li>
<li><a class="" href="calendar-heat-map-tutorial.html"><span class="header-section-number">30</span> Calendar heat map tutorial</a></li>
<li><a class="" href="basic-time-series-analysis-and-prediction.html"><span class="header-section-number">31</span> Basic time series analysis and prediction</a></li>
<li><a class="" href="cheatsheet-for-circlize-package.html"><span class="header-section-number">32</span> Cheatsheet for ‘circlize’ package</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="github-initial-setup.html"><span class="header-section-number">33</span> Github initial setup</a></li>
<li><a class="" href="tutorial-for-pull-request-mergers.html"><span class="header-section-number">34</span> Tutorial for pull request mergers</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/jtr13/cc22spring">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="basic-introduction-to-tidyverse" class="section level1" number="28">
<h1>
<span class="header-section-number">28</span> Basic introduction to tidyverse<a class="anchor" aria-label="anchor" href="#basic-introduction-to-tidyverse"><i class="fas fa-link"></i></a>
</h1>
<p>Xiaoyuan Ge and Hui Li</p>
<div class="sourceCode" id="cb305"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></code></pre></div>
<div id="motivation-4" class="section level2" number="28.1">
<h2>
<span class="header-section-number">28.1</span> Motivation<a class="anchor" aria-label="anchor" href="#motivation-4"><i class="fas fa-link"></i></a>
</h2>
<p>In data science, good visualizations should give and provide more information than you can just see in the data itself. Good visualizations should give us a more direct and clear sense of what is going on. However, bad data sometimes even worsen the situation and make us more confused on the data that on our hand.</p>
<p>We have an additional cheatsheet on the separate file. The link is:
<a href="https://github.com/xiaoyuan1129/cc22spring/blob/main/resources/basic_introduction_to_%20tidyverse_cheatsheet.pdf" class="uri">https://github.com/xiaoyuan1129/cc22spring/blob/main/resources/basic_introduction_to_%20tidyverse_cheatsheet.pdf</a></p>
<p>And the following is mainly about the use of “Tidyverse” in R. We focus on the data visualization with ggplot2 and data transformation with dplyr. Since there are many included inside Tidyverse package, this package could help people to transform data and plot data. And these are also 2 main goals that we want to showed on our cheat sheet. And firstly, because our class is named as data visualization and the mostly we learned on how to plotting different dataset with different properties. Also, under different situation and needs, we sometimes need to plot varies plots combined with accordingly explanation. Thus plotting accordingly based on the data set that we have would help us better see and explain and understanding the data.</p>
<p>R has several packages faciliate us making different plots and graphs, “ggplot2” is one of the most widely-used and flexible one that people use a lot in practice. Let’s starting by using mtcars</p>
</div>
<div id="data-visualization-1" class="section level2" number="28.2">
<h2>
<span class="header-section-number">28.2</span> Data visualization<a class="anchor" aria-label="anchor" href="#data-visualization-1"><i class="fas fa-link"></i></a>
</h2>
<div id="scatterplot-4" class="section level3" number="28.2.1">
<h3>
<span class="header-section-number">28.2.1</span> Scatterplot<a class="anchor" aria-label="anchor" href="#scatterplot-4"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb306"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 234  11</code></pre>
<div class="sourceCode" id="cb308"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">mpg</span>,<span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 11
##   manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class 
##   &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; 
## 1 audi         a4      1.8  1999     4 auto(l5)   f        18    29 p     compa…
## 2 audi         a4      1.8  1999     4 manual(m5) f        21    29 p     compa…
## 3 audi         a4      2    2008     4 manual(m6) f        20    31 p     compa…</code></pre>
<div class="sourceCode" id="cb310"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="basic_introduction_to_tidyverse_files/figure-html/unnamed-chunk-3-1.png" width="672" style="display: block; margin: auto;"></div>
<p>By plotting scatter plot, we do see a relationship between hwy and cyl, however, no more additional information provided to us based on this graph. There are only 2 variables included in, we can then add a third one and use color to classify them.</p>
<div class="sourceCode" id="cb311"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">displ</span>, y<span class="op">=</span><span class="va">hwy</span>, color<span class="op">=</span><span class="va">class</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="basic_introduction_to_tidyverse_files/figure-html/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;"></div>
<p>Colors of different dots help us to form a more comprehensive acknowledge as of the first graph on above. We could have a clear insight of knowing of different classes. However, this could be used as letting we know the constitution of class under this negative relationship. This could be used for discrete variables. When it comes to continuous variables, there is another way.</p>
<div class="sourceCode" id="cb312"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">class</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="basic_introduction_to_tidyverse_files/figure-html/unnamed-chunk-5-1.png" width="672" style="display: block; margin: auto;"></div>
<p>We could map a continuous variable in the mpg dataset, like cty, to the alpha,shape, and size aesthetics. we could add categorical variables to plots and split them into facets.</p>
</div>
<div id="bar-plot-1" class="section level3" number="28.2.2">
<h3>
<span class="header-section-number">28.2.2</span> Bar plot<a class="anchor" aria-label="anchor" href="#bar-plot-1"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb313"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">diamonds</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">cut</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="basic_introduction_to_tidyverse_files/figure-html/unnamed-chunk-6-1.png" width="672" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb314"><pre class="downlit sourceCode r">
<code class="sourceCode R"> <span class="va">upper</span> <span class="op">&lt;-</span> <span class="va">diamonds</span><span class="op">$</span><span class="va">price</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">diamonds</span><span class="op">$</span><span class="va">price</span>,probs <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span>
 <span class="va">diamonds</span><span class="op">$</span><span class="va">Expensive</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">upper</span>,<span class="st">"high"</span>,<span class="st">"not-high"</span><span class="op">)</span>
 <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html">theme_update</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>
 <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">diamonds</span><span class="op">)</span> <span class="op">+</span>
   <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">cut</span>,fill<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">Expensive</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
   <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_gray</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
   <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Bar chart"</span>,fill<span class="op">=</span><span class="st">"Price"</span>,x<span class="op">=</span><span class="st">""</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="basic_introduction_to_tidyverse_files/figure-html/unnamed-chunk-7-1.png" width="672" style="display: block; margin: auto;"></div>
<p>We use bar plot for categorical data, I plotted 2 kinds of bar plot above. Stacked Bar chart could help us to observe the count values across to two categorical variables.The advantage of bar plot is Show each data category in a frequency distribution,Display relative numbers/proportions of multiple categories,Summarize a large amount of data in a visual, easily intepretable form,and Make trends easier to highlight than tables do . However, the main disadvantages of bar chart are: It cannot show sufficient detail to enable timely detection of schedule slippages. The bar chart does not show the dependency relationships among activities.</p>
</div>
<div id="histogram-4" class="section level3" number="28.2.3">
<h3>
<span class="header-section-number">28.2.3</span> Histogram<a class="anchor" aria-label="anchor" href="#histogram-4"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb315"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>,<span class="fl">5</span>,by<span class="op">=</span><span class="fl">.01</span><span class="op">)</span>
 <span class="va">hist_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x.var<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span><span class="op">)</span>
<span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>,f<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">dnorm</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>
 <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">hist_data</span><span class="op">)</span><span class="op">+</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x.var</span>,y<span class="op">=</span><span class="va">..density..</span><span class="op">)</span>,
               col<span class="op">=</span><span class="st">"blue"</span>,fill<span class="op">=</span><span class="st">"white"</span>,binwidth<span class="op">=</span><span class="fl">.2</span><span class="op">)</span><span class="op">+</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="va">plot_data</span>,mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">f</span><span class="op">)</span>,
          col<span class="op">=</span><span class="st">"black"</span><span class="op">)</span><span class="op">+</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Nomal Example"</span>,x<span class="op">=</span><span class="st">"x"</span>,y<span class="op">=</span><span class="st">"Density"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="basic_introduction_to_tidyverse_files/figure-html/unnamed-chunk-8-1.png" width="672" style="display: block; margin: auto;"></div>
<p>A histogram is a bar graph-like representation of data that buckets a range of outcomes into columns along the x-axis. The y-axis represents the number count or percentage of occurrences in the data for each column and can be used to visualize data distributions.And the purpose of a histogram (Chambers) is to graphically summarize the distribution of a univariate data set.The main advantages of a histogram are its simplicity and versatility. It can be used in many different situations to offer an insightful look at frequency distribution。</p>
</div>
</div>
<div id="data-transformation" class="section level2" number="28.3">
<h2>
<span class="header-section-number">28.3</span> Data transformation<a class="anchor" aria-label="anchor" href="#data-transformation"><i class="fas fa-link"></i></a>
</h2>
<div id="installation" class="section level3" number="28.3.1">
<h3>
<span class="header-section-number">28.3.1</span> Installation<a class="anchor" aria-label="anchor" href="#installation"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb316"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># The easiest way to get dplyr is to install the whole tidyverse:</span>
<span class="co">#install.packages("tidyverse") - library(tidyverse)</span>

<span class="co"># Alternatively, install just dplyr:</span>
<span class="co"># install.packages("dplyr")</span></code></pre></div>
</div>
<div id="usage" class="section level3" number="28.3.2">
<h3>
<span class="header-section-number">28.3.2</span> Usage<a class="anchor" aria-label="anchor" href="#usage"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb317"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">mpg</span>,<span class="fl">6</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 11
##   manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class 
##   &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; 
## 1 audi         a4      1.8  1999     4 auto(l5)   f        18    29 p     compa…
## 2 audi         a4      1.8  1999     4 manual(m5) f        21    29 p     compa…
## 3 audi         a4      2    2008     4 manual(m6) f        20    31 p     compa…
## 4 audi         a4      2    2008     4 auto(av)   f        21    30 p     compa…
## 5 audi         a4      2.8  1999     6 auto(l5)   f        16    26 p     compa…
## 6 audi         a4      2.8  1999     6 manual(m5) f        18    26 p     compa…</code></pre>
<div class="sourceCode" id="cb319"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Filter rows with filter(). filter() allows you to subset observations based on their values. The first argument is the name of the data frame. The second and subsequent arguments are the expressions that filter the data frame. For example, we can select all manufacturer in 2008 year with 4 cyl, 21 cty:</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="va">year</span> <span class="op">==</span> <span class="fl">2008</span>, <span class="va">cyl</span> <span class="op">==</span> <span class="fl">4</span>, <span class="va">cty</span> <span class="op">==</span> <span class="fl">21</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 11
##    manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
##  1 audi         a4           2    2008     4 auto… f        21    30 p     comp…
##  2 honda        civic        2    2008     4 manu… f        21    29 p     subc…
##  3 hyundai      sonata       2.4  2008     4 auto… f        21    30 r     mids…
##  4 hyundai      sonata       2.4  2008     4 manu… f        21    31 r     mids…
##  5 toyota       camry        2.4  2008     4 manu… f        21    31 r     mids…
##  6 toyota       camry        2.4  2008     4 auto… f        21    31 r     mids…
##  7 toyota       camry sol…   2.4  2008     4 manu… f        21    31 r     comp…
##  8 volkswagen   gti          2    2008     4 manu… f        21    29 p     comp…
##  9 volkswagen   jetta        2    2008     4 manu… f        21    29 p     comp…
## 10 volkswagen   passat       2    2008     4 manu… f        21    29 p     mids…</code></pre>
<div class="sourceCode" id="cb321"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Arrange rows with arrange().arrange() works similarly to filter() except that instead of selecting rows, it changes their order. It takes a data frame and a set of column names (or more complicated expressions) to order by. If you provide more than one column name, each additional column will be used to break ties in the values of preceding columns:</span>
<span class="va">data1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="va">year</span>, <span class="va">cyl</span>, <span class="va">cty</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data1</span>, <span class="fl">6</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 11
##   manufacturer model       displ  year   cyl trans drv     cty   hwy fl    class
##   &lt;chr&gt;        &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
## 1 toyota       4runner 4wd   2.7  1999     4 manu… 4        15    20 r     suv  
## 2 toyota       toyota tac…   2.7  1999     4 manu… 4        15    20 r     pick…
## 3 audi         a4 quattro    1.8  1999     4 auto… 4        16    25 p     comp…
## 4 toyota       4runner 4wd   2.7  1999     4 auto… 4        16    20 r     suv  
## 5 toyota       toyota tac…   2.7  1999     4 auto… 4        16    20 r     pick…
## 6 audi         a4            1.8  1999     4 auto… f        18    29 p     comp…</code></pre>
<div class="sourceCode" id="cb323"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data2</span>, <span class="fl">6</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 11
##   manufacturer model      displ  year   cyl trans  drv     cty   hwy fl    class
##   &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
## 1 audi         a4           2    2008     4 manua… f        20    31 p     comp…
## 2 audi         a4           2    2008     4 auto(… f        21    30 p     comp…
## 3 audi         a4           3.1  2008     6 auto(… f        18    27 p     comp…
## 4 audi         a4 quattro   2    2008     4 manua… 4        20    28 p     comp…
## 5 audi         a4 quattro   2    2008     4 auto(… 4        19    27 p     comp…
## 6 audi         a4 quattro   3.1  2008     6 auto(… 4        17    25 p     comp…</code></pre>
<div class="sourceCode" id="cb325"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Select columns with select(). It’s not uncommon to get datasets with hundreds or even thousands of variables. In this case, the first challenge is often narrowing in on the variables you’re actually interested in. select() allows you to rapidly zoom in on a useful subset using operations based on the names of the variables.</span>
<span class="va">data3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="va">drv</span>, <span class="va">cty</span>, <span class="va">hwy</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data3</span>, <span class="fl">6</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   drv     cty   hwy
##   &lt;chr&gt; &lt;int&gt; &lt;int&gt;
## 1 f        18    29
## 2 f        21    29
## 3 f        20    31
## 4 f        21    30
## 5 f        16    26
## 6 f        18    26</code></pre>
<div class="sourceCode" id="cb327"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Or, you can use as below:</span>
<span class="va">data4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="va">drv</span><span class="op">:</span><span class="va">hwy</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data4</span>,<span class="fl">6</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   drv     cty   hwy
##   &lt;chr&gt; &lt;int&gt; &lt;int&gt;
## 1 f        18    29
## 2 f        21    29
## 3 f        20    31
## 4 f        21    30
## 5 f        16    26
## 6 f        18    26</code></pre>
<div class="sourceCode" id="cb329"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## Select all columns except those from drv to hwy (inclusive)</span>
<span class="va">data5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mpg</span>,<span class="op">-</span><span class="op">(</span><span class="va">drv</span><span class="op">:</span><span class="va">hwy</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data5</span>,<span class="fl">6</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 8
##   manufacturer model displ  year   cyl trans      fl    class  
##   &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;  
## 1 audi         a4      1.8  1999     4 auto(l5)   p     compact
## 2 audi         a4      1.8  1999     4 manual(m5) p     compact
## 3 audi         a4      2    2008     4 manual(m6) p     compact
## 4 audi         a4      2    2008     4 auto(av)   p     compact
## 5 audi         a4      2.8  1999     6 auto(l5)   p     compact
## 6 audi         a4      2.8  1999     6 manual(m5) p     compact</code></pre>
<div class="sourceCode" id="cb331"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Add new variables with mutate(). Besides selecting sets of existing columns, it’s often useful to add new columns that are functions of existing columns. That’s the job of mutate(). mutate() always adds new columns at the end of your dataset so we’ll start by creating a narrower dataset so we can see the new variables. </span>
<span class="va">mpg_sml</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mpg</span>,
                  <span class="va">manufacturer</span>,
                  <span class="va">model</span><span class="op">:</span><span class="va">year</span>,
                  <span class="va">cyl</span>,
                  <span class="va">drv</span><span class="op">:</span><span class="va">hwy</span><span class="op">)</span>
<span class="va">data6</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">mpg_sml</span>, net <span class="op">=</span> <span class="va">hwy</span><span class="op">-</span><span class="va">cty</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data6</span>, <span class="fl">6</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 9
##   manufacturer model displ  year   cyl drv     cty   hwy   net
##   &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 audi         a4      1.8  1999     4 f        18    29    11
## 2 audi         a4      1.8  1999     4 f        21    29     8
## 3 audi         a4      2    2008     4 f        20    31    11
## 4 audi         a4      2    2008     4 f        21    30     9
## 5 audi         a4      2.8  1999     6 f        16    26    10
## 6 audi         a4      2.8  1999     6 f        18    26     8</code></pre>
<div class="sourceCode" id="cb333"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Grouped summaries with summarise(). summarise() is not terribly useful unless we pair it with group_by(). This changes the unit of analysis from the complete dataset to individual groups. Then, when you use the dplyr verbs on a grouped data frame they’ll be automatically applied “by group”.</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="va">mpg</span>, avg_year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">year</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   avg_year
##      &lt;dbl&gt;
## 1    2004.</code></pre>
<div class="sourceCode" id="cb335"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">amount</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="va">cty</span>, <span class="va">hwy</span><span class="op">)</span>
<span class="va">data7</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="va">amount</span>, avg_year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">year</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data7</span>, <span class="fl">6</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
## # Groups:   cty [3]
##     cty   hwy avg_year
##   &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;
## 1     9    12    2008 
## 2    11    14    2008 
## 3    11    15    2000.
## 4    11    16    1999 
## 5    11    17    2001.
## 6    12    16    2008</code></pre>
<div class="sourceCode" id="cb337"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Ungrouping. If you need to remove grouping, and return to operations on ungrouped data, use ungroup().</span>
<span class="va">ye</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="va">year</span><span class="op">)</span>
<span class="va">ye</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>            
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mpg <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##     mpg
##   &lt;int&gt;
## 1   234</code></pre>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="lecture-helper.html"><span class="header-section-number">27</span> Lecture Helper</a></div>
<div class="next"><a href="class_material_code_throughout_this_semester.html"><span class="header-section-number">29</span> class_material_code_throughout_this_semester</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#basic-introduction-to-tidyverse"><span class="header-section-number">28</span> Basic introduction to tidyverse</a></li>
<li><a class="nav-link" href="#motivation-4"><span class="header-section-number">28.1</span> Motivation</a></li>
<li>
<a class="nav-link" href="#data-visualization-1"><span class="header-section-number">28.2</span> Data visualization</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#scatterplot-4"><span class="header-section-number">28.2.1</span> Scatterplot</a></li>
<li><a class="nav-link" href="#bar-plot-1"><span class="header-section-number">28.2.2</span> Bar plot</a></li>
<li><a class="nav-link" href="#histogram-4"><span class="header-section-number">28.2.3</span> Histogram</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#data-transformation"><span class="header-section-number">28.3</span> Data transformation</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#installation"><span class="header-section-number">28.3.1</span> Installation</a></li>
<li><a class="nav-link" href="#usage"><span class="header-section-number">28.3.2</span> Usage</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/jtr13/cc22spring/blob/main/basic_introduction_to_tidyverse.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/jtr13/cc22spring/edit/main/basic_introduction_to_tidyverse.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Community Contributions STAT GR 5293</strong>" was written by . It was last built on 2022-04-12.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
